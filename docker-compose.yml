services:
  standard:
    build:
      context: .
      dockerfile: images/standard/Dockerfile
    tty: true
    stdin_open: true
    working_dir: /work
    volumes:
      - ./:/work
      - standard-home:/home/dev
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - ALLOWED_REPOS=${ALLOWED_REPOS:-}

  ralph:
    build:
      context: .
      dockerfile: images/ralph/Dockerfile
    tty: true
    stdin_open: true
    working_dir: /work
    volumes:
      - ./:/work
      - ralph-home:/home/dev
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - ALLOWED_REPOS=${ALLOWED_REPOS:-}

volumes:
  standard-home:
  ralph-home:
